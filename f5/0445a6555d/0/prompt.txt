# Open Command

Define what this app is about and set the foundation for all future Epics.

This is the very first step: open the restaurant â€” decide what kind of place this is.

## When to Use

- Starting a new project from scratch
- No `docs/specs/overview.md` exists yet
- Updating the app's overall direction

## Workflow

### Step 1: Investigate Existing State

Use Grep, Glob, Read to understand:

- Does a codebase already exist? What does it do?
- Is there existing documentation (README, CLAUDE.md, etc.)?
- What technologies, frameworks, patterns are in use?

If `docs/specs/overview.md` already exists, read it and ask if user wants to update.

### Step 2: Clarify Vision

Use AskUserQuestion iteratively:

- 2-4 questions per round
- 2-4 concrete options per question
- Focus categories:
  - **What**: What is this app? Who is it for?
  - **Why**: What problem does it solve? Why does it matter?
  - **Vision**: Where is this heading in 6-12 months?
  - **Constraints**: Technical constraints, team size, timeline
  - **Differentiation**: What makes this different from alternatives?
  - **Epics**: What are the major feature areas to build? What order?

Keep iterating until the app's identity, direction, and candidate Epics are clear.

### Step 3: Generate App-Level Spec

Create `docs/specs/` with 2 files:

```
docs/specs/
â”œâ”€â”€ overview.md
â””â”€â”€ scope.md
```

#### overview.md

```markdown
# <App Name>

## What is This

<!-- 1-2 sentence description of the app -->

## Who is This For

<!-- Target users, personas -->

## Problem

<!-- What pain point does this solve? -->

## Vision

<!-- Where is this heading? 6-12 month direction -->

## Principles

<!-- 3-5 guiding principles for decision-making -->

-
```

#### scope.md

```markdown
# Scope: <App Name>

## Current Phase

<!-- What phase is the project in? (ideation / MVP / growth / mature) -->

## In Scope (this phase)

-

## Out of Scope (this phase)

-

## Technical Constraints

<!-- Frameworks, infrastructure, team capacity -->

-

## Success Criteria

-

## Recommended Epics

<!-- Based on the vision and scope above, list candidate Epics to build. -->
<!-- PM picks from this list when running /kitchen:menu. -->

| Priority | Epic (slug) | One-line description | Why |
| -------- | ----------- | -------------------- | --- |
| P0       |             |                      |     |
| P1       |             |                      |     |
| P2       |             |                      |     |
```

### Step 4: User Confirmation

Present generated files for review. Handle modifications if requested.

## Rules

- Always respond in the user's language
- Read existing code and docs BEFORE asking questions
- Limit each AskUserQuestion to 2-4 questions
- Provide 2-4 concrete options per question
- This is app-level â€” do NOT write detailed feature specs (that is `/kitchen:menu`)
- scope.md must include a "Recommended Epics" table so PM knows what to `/kitchen:menu` next
- Always request user confirmation after generating files

## Next Step

Pick the highest-priority Epic from scope.md's "Recommended Epics" table and run `/kitchen:menu <epic>` to create its spec.

---

Markdownã®è¡¨ã‚’å‡ºåŠ›ã™ã‚‹æ©Ÿèƒ½ã¯æ¬²ã—ã„ã‹ã‚‚ã€äººé–“ç”¨ã«

---

# Menu Command

Create a lightweight epic-level spec for the initiative described in ``.

This is the PM's first step: define WHAT to build and WHY.

## Workflow

### Step 0: Check Current Branch

Run `git branch --show-current` and present the current branch to the user via AskUserQuestion. Ask whether to proceed on the current branch or switch first. The worktree in Step 3 will branch from whatever branch you are on.

### Step 1: Investigate Codebase

Use Grep, Glob, Read to understand:

- Existing features related to this initiative
- Current architecture and patterns
- Potential impact areas

### Step 2: Clarify Requirements

Use AskUserQuestion iteratively:

- 2-4 questions per round
- 2-4 concrete options per question
- Focus categories:
  - **Why**: Business reason for this initiative
  - **Hypothesis**: What we expect to validate
  - **Scope**: What to include / exclude
  - **Users**: Target users, personas
  - **Success criteria**: How we measure success
  - **Risks**: What could go wrong

Keep iterating until Why, hypothesis, and scope are clear.

### Step 3: Create Worktree & Spec Directory

Create a git worktree for this epic so all subsequent work is isolated:

```bash
git worktree add ../worktrees/<epic> -b feature/<epic>
```

Then inside the worktree, create `docs/specs/<epic>/` with 2 files:

```
docs/specs/<epic>/
â”œâ”€â”€ overview.md
â””â”€â”€ scope.md
```

`<epic>` is a slug derived from user input (e.g., "PDF export feature" -> `pdf-export`).

#### overview.md

```markdown
# <Epic Name>

## Summary

<!-- 1-2 sentence project overview -->

## Background & Purpose

<!-- Why is this project needed? User pain points, business rationale -->

## Why Now

<!-- Urgency, timing rationale -->

## Hypothesis

<!-- What we want to validate. Use "If we <action>, then <outcome>" format -->

- Hypothesis 1:
- Hypothesis 2:

## Expected Outcome

<!-- What we gain if hypotheses are correct -->
```

#### scope.md

```markdown
# Scope: <Epic Name>

## In Scope

-

## Out of Scope

-

## Success Criteria (KPI)

### Expected to Improve

-

### At Risk (may decrease)

-

## Acceptance Gates

<!-- Conditions for PM to approve release -->

- [ ]

## Experiment Info (if applicable)

- Flag name:
- Variants:
- Traffic split %:
```

### Step 4: User Confirmation

Present generated files for review. Handle modifications if requested.

## Rules

- Always respond in the user's language
- Read existing code BEFORE asking questions
- Limit each AskUserQuestion to 2-4 questions
- Provide 2-4 concrete options per question
- Do NOT create requirements.md or design.md â€” that is the engineer's job (done by the recipe agent)
- Always request user confirmation after generating files

## Next Step

Switch to the worktree (`cd ../worktrees/<epic>`) and run `/kitchen:order` to create an Epic Issue from this spec.

---

[Request interrupted by user]

---

# Menu Command

Create a lightweight epic-level spec for the initiative described in `core`.

This is the PM's first step: define WHAT to build and WHY.

## Workflow

### Step 0: Check Current Branch

Run `git branch --show-current` and present the current branch to the user via AskUserQuestion. Ask whether to proceed on the current branch or switch first. The worktree in Step 3 will branch from whatever branch you are on.

### Step 1: Investigate Codebase

Use Grep, Glob, Read to understand:

- Existing features related to this initiative
- Current architecture and patterns
- Potential impact areas

### Step 2: Clarify Requirements

Use AskUserQuestion iteratively:

- 2-4 questions per round
- 2-4 concrete options per question
- Focus categories:
  - **Why**: Business reason for this initiative
  - **Hypothesis**: What we expect to validate
  - **Scope**: What to include / exclude
  - **Users**: Target users, personas
  - **Success criteria**: How we measure success
  - **Risks**: What could go wrong

Keep iterating until Why, hypothesis, and scope are clear.

### Step 3: Create Worktree & Spec Directory

Create a git worktree for this epic so all subsequent work is isolated:

```bash
git worktree add ../worktrees/<epic> -b feature/<epic>
```

Then inside the worktree, create `docs/specs/<epic>/` with 2 files:

```
docs/specs/<epic>/
â”œâ”€â”€ overview.md
â””â”€â”€ scope.md
```

`<epic>` is a slug derived from user input (e.g., "PDF export feature" -> `pdf-export`).

#### overview.md

```markdown
# <Epic Name>

## Summary

<!-- 1-2 sentence project overview -->

## Background & Purpose

<!-- Why is this project needed? User pain points, business rationale -->

## Why Now

<!-- Urgency, timing rationale -->

## Hypothesis

<!-- What we want to validate. Use "If we <action>, then <outcome>" format -->

- Hypothesis 1:
- Hypothesis 2:

## Expected Outcome

<!-- What we gain if hypotheses are correct -->
```

#### scope.md

```markdown
# Scope: <Epic Name>

## In Scope

-

## Out of Scope

-

## Success Criteria (KPI)

### Expected to Improve

-

### At Risk (may decrease)

-

## Acceptance Gates

<!-- Conditions for PM to approve release -->

- [ ]

## Experiment Info (if applicable)

- Flag name:
- Variants:
- Traffic split %:
```

### Step 4: User Confirmation

Present generated files for review. Handle modifications if requested.

## Rules

- Always respond in the user's language
- Read existing code BEFORE asking questions
- Limit each AskUserQuestion to 2-4 questions
- Provide 2-4 concrete options per question
- Do NOT create requirements.md or design.md â€” that is the engineer's job (done by the recipe agent)
- Always request user confirmation after generating files

## Next Step

Switch to the worktree (`cd ../worktrees/<epic>`) and run `/kitchen:order` to create an Epic Issue from this spec.

---

[Request interrupted by user for tool use]

---

ç¶šã‘ã¦

---

ã‚ˆãã‚ˆãè€ƒãˆãŸã‘ã©ã€é•ã†identifieråŒå£«ã§æ¯”è¼ƒã•ã‚ŒãŸå ´åˆã©ã™ã„ãŸã‚‰ã„ã„ã‚“ã ã‚ï¼Ÿ

---

ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã¯ãªã‚“ã ã‚ã†

---

kubectl get pods,servicesã£ã¦ä½•ï¼Ÿ

---

ã˜ã‚ƒã‚ãã†ã—ã‚ˆã†

---

ã˜ã‚ƒã‚ã—ã¦

---

[Request interrupted by user]

---

docsã¯ä¸€æ—¦ã‚³ãƒŸãƒƒãƒˆã›ãšã€specã¯PRã«ã—ãŸã„

---

ä¸€æ—¦mainã«æˆ»ã‚Šã€commitlintã§featã¨ã‹ã®ã‚ˆãã‚ã‚‹ã‚„ã¤ã®è¦ç´„ã‚’å®ˆã‚‹ã‚ˆã†ã«ã—ã¦ã»ã—ã„ã€flakeã§è¨­å®šã§ãã‚‹ï¼Ÿ

---

gitleaksã‚‚ãŠã­ãŒã„

---

github cliã§gitignoreåˆæœŸåŒ–ã—ã¦ã€go

---

ã†ã‚“

---

push

---

a,.pre-commit-config.yaml ignore force push

---

ã•ã£ãã®PRã®ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å¤‰ãˆã¦force pushã€rebase

---

[Request interrupted by user for tool use]

---

$ git config --add wt.hook 'direnv allow && eval "$(direnv export bash 2>/dev/null)" && pnpm install' ã“ã‚Œè¨­å®šã™ã‚‹ã¨ã„ã„ï¼Œgopã‚¦ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«åˆã‚ã›ã¦ã„ã„æ„Ÿã˜ã«

---

ã„ã„ã­ã€ã§ã¯ç¶šã‘ã¦

---

docs(specs)ã¿ãŸã„ã«ã‚µãƒ–ã®ã‚„ã¤ã‚’å¿…é ˆã«ã—ãŸã„ã‚“ã ãŒã€ã§ãã‚‹ã‹ï¼Ÿ

---

[Request interrupted by user for tool use]

---

ãªã‚“ã‹ã‚‚ã†å°‘ã—ç¶ºéº—ã«ã‚„ã‚‹æ–¹æ³•ã‚ã‚‹ã¯ãšã€èª¿ã¹ã¦

---

ã†ãƒ¼ã‚“ã˜ã‚ƒã‚ãã‚Œã‚„ã‚ã¦ã€AGENTS.mdã«è‹±èªã§è¦ç´„æ›¸ãã‚ˆã†ã«ã—ã¦ã€‚CLAUDE/mdmã‚‚sym link

---

[Request interrupted by user for tool use]

---

ã„ã‚„ãã‚Œã¯æ®‹ã—ãŸã¾ã¾ã§ã„ã„

---

ã„ã„ã­ã€ã‚³ãƒŸãƒƒãƒˆã—ã¦

---

yes

---

feature/coreã®ã‚³ãƒ¡ãƒ³ãƒˆã‚‚ç›´ã—ã¦

---

GitHub CLIã¨ä¸Šæ‰‹ãçµ±åˆã—ã¦ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ãƒˆãƒ¼ã‚¯ãƒ³ã®æ˜ç¤ºãªã—ã§æ©Ÿèƒ½ã™ã‚‹ã®ãŒç†æƒ³ã ãª

---

ãƒˆãƒ¼ã‚¯ãƒ³ãªãã¦ã‚‚ä¸€å¿œãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒãƒˆã¤ã‚ˆã„ã‘ã©ã†ã”ã†ã«ã¯å‹•ãã¯ãš

---

ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ•°ã¯çµæ§‹å¤§äº‹ãªæ°—ãŒã™ã‚‹

---

ä¸€æ—¦ã„ã„ã‹

---

æ¬¡ã¯ã©ã†ã™ã‚Œã°ã„ã„ã‚“ã ã£ã‘

---

ã‚‚ã†ãƒãƒ¼ã‚¸ã—ãŸ /kitchen:order

---

[Request interrupted by user]

---

# Order Command

Takes a spec directory (e.g., `docs/specs/pdf-export`) or epic name via `` and creates an **Epic Issue** on GitHub.

This is the PM's second step: pass the order to the engineering team.

## Workflow

### Step 0: Check Current Branch

Run `git branch --show-current` and present the result to the user. If not on a feature branch, use AskUserQuestion to ask whether to proceed on the current branch or switch to the correct worktree first.

### Step 1: Read the Spec

1. Read `overview.md` and `scope.md` under `docs/specs/<epic>/`
2. If spec not found, suggest running `/kitchen:menu` first

### Step 2: Create Epic Issue

Compose the issue body:

- **Summarize** the spec (do not duplicate full content)
- **Link** to the spec files as the source of truth

Follow `registry/git/templates/issue/epic.md` template:

```markdown
## æ¦‚è¦

<!-- 1-2 sentence summary from overview.md -->

## èƒŒæ™¯ãƒ»ç›®çš„

<!-- Short summary of Why + hypothesis from overview.md -->

## ã‚¹ãƒšãƒƒã‚¯

> [overview.md](../docs/specs/<epic>/overview.md) | [scope.md](../docs/specs/<epic>/scope.md)

## å®Œäº†æ¡ä»¶

- [ ] <!-- Key acceptance gates from scope.md -->

## å‚è€ƒæƒ…å ±ãƒ»è£œè¶³

- Spec directory: `docs/specs/<epic>/`
- Success criteria: <!-- 1-line summary from scope.md KPI -->
- Out of scope: <!-- 1-line summary from scope.md -->
```

Publish:

```bash
gh issue create \
  --title "<epic title>" \
  --label "epic" \
  --body-file -
```

Open in browser:

```bash
gh issue view --web
```

### Step 3: User Confirmation

Present the created issue. Handle modifications if needed.

## Rules

- Always respond in the user's language

## Title Rules

- Written in Japanese (following git plugin convention)
- 72 characters or fewer
- No prefixes like `[WIP]`, `[BUG]`, `[FEATURE]`
- Convey the overall initiative clearly

## What This Command Does NOT Do

- Does not create child task issues (engineer does this via chef -> prep)
- Does not decompose requirements into technical tasks
- Does not prescribe implementation approach

## Next Step

After order, the engineer runs `/kitchen:recipe #<issue-number>` to start implementation.

---

# Recipe Command

You are a requirements specialist who reads the issue/spec, investigates the codebase, clarifies ambiguities, and writes detailed feature-level specifications.

## Your Skills

Read and follow these skill documents when working:

- `registry/skills/coding-standards.md` â€” Read to understand project coding conventions. Ground requirements in these standards.
- `registry/skills/backend-patterns.md` â€” Read when specifying backend features (API, DB, server-side).
- `registry/skills/frontend-patterns.md` â€” Read when specifying frontend features (React, Next.js, state).
- `registry/skills/design-principles/skill.md` â€” Read when specifying UI features (design system, layout, components).

## Input

`#2` is either:

- A GitHub Issue number (e.g., `#42`) â€” fetch with `gh issue view`
- A feature description (e.g., `PDF export button`)

## Workflow

### Step 0: Check Current Branch

Run `git branch --show-current` and present the result to the user. If not on a feature branch, use AskUserQuestion to ask whether to proceed or switch first.

### Step 1: Read Context

1. Read the epic spec under `docs/specs/<epic>/`
2. If an issue number is provided, fetch it with `gh issue view`
3. Identify what feature/component you are specifying

### Step 2: Investigate Codebase

1. Use Grep, Glob, Read to understand relevant code areas
2. Identify existing patterns, data models, APIs
3. Find code that will be affected by this feature

### Step 3: Clarify Ambiguities

Use AskUserQuestion iteratively:

- 2-4 questions per round
- Provide 2-4 concrete options per question
- Focus on:
  - Functional behavior (what happens when...)
  - Edge cases (what if...)
  - Non-functional requirements (performance, security)
  - Integration points (how does this connect to...)

### Step 4: Write Feature Spec

Create `docs/specs/<epic>/<feature>/` with 2 files:

#### requirements.md

```markdown
# Requirements: <Feature Name>

## Functional Requirements

### P1 (Must have)

-

### P2 (Should have)

-

### P3 (Nice to have)

-

## Non-Functional Requirements

-

## Edge Cases

1.
2.
3.

## Constraints

-
```

#### design.md

```markdown
# Design: <Feature Name>

## Current State

<!-- What exists today -->

## Proposed Changes

<!-- What we're building / changing -->

## Backend Spec

<!-- API endpoints, data models, processing flow -->

## Tracking

| Event Name | Properties | Trigger Condition |
| ---------- | ---------- | ----------------- |
|            |            |                   |
```

### Step 5: User Confirmation

Present generated files for review. Handle modifications if requested.

## Output

- `docs/specs/<epic>/<feature>/requirements.md`
- `docs/specs/<epic>/<feature>/design.md`

## Rules

- Always respond in the user's language
- Always read existing code before asking questions
- Keep questions grounded in what you found in the codebase
- Do not prescribe implementation details in requirements â€” keep them behavior-focused
- Design.md should describe WHAT changes, not HOW to code them
- Limit each AskUserQuestion round to 2-4 questions

## Next Step

Run `/kitchen:prep` to create an implementation plan and decompose into TODO tasks.

---

ã“ã‚Œã‚‚ä¸€æ—¦PRã«

---

ã‚¹ã‚«ãƒƒã‚·ãƒ¥ãƒãƒ¼ã‚¸ãªã®ã§ã€PRã‚¿ã‚¤ãƒˆãƒ«ã‚‚ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®è¦æ ¼ã«å¯¾å¿œã™ã‚‹ã‚ˆã†ã«. claude.md